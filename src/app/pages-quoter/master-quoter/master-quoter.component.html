<div class="grid grid-cols-1 gap-2 mb-2  ">
    <div class="bg-white rounded-md border border-gray-100 p-6 shadow-md shadow-black/5">
        <div class="p-6 flex justify-between">
          <!-- columna de la izquierda -->
            <div class="w-1/4 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="name_mq" class="block text-sm font-medium text-gray-700">Name Master Quoter</label>
                        <input [(ngModel)]="masterQuoter.name" name="name_mq" type="text" id="name_mq" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Name Master Quoter">
                    </div>
                    <div>
                        <label for="accommodations" class="block text-sm font-medium text-gray-700">Days</label>
                        <input [(ngModel)]="masterQuoter.days" type="number"  name="newQuoter.number_paxs_" id="number_paxs_" class="mt-1 block w-16 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Days" required>
                    </div>
                </div>
                <div>
                  <button (click)="onSubmit()" class=" mt-3  px-4 bg-green-400 dark:bg-green-700 p-3 rounded-lg text-white hover:bg-green-600 dark:hover:bg-green-800 self-start">
                  Save Master Quoter
                </button>
                </div>

            </div>
            <!-- columna de la derecha -->
            <div class="w-full space-y-4">
            <div class="grid grid-cols-4 gap-4">
                <div>
                    <label for="selectCategoria" class="block text-sm font-medium text-gray-700">Selecione la categoria</label>
                    <select  [(ngModel)]="selectCategoria" (change)="onCategoriaChange($event)" name="selectedCategory" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" >
                        <option value="" disabled selected>Select Category</option>
                        <option value="entrance">Entrances</option>
                        <option value="expeditions">Expeditions</option>
                        <option value="guides">Guides</option>
                        <option value="restaurant">Restaurants</option>
                        <option value="operator">Operators</option>
                        <!--<option value="transport">Transporte</option>
                        <option value="experience">Experiencias</option>train-->
                    </select>
                </div>
                <div>
                    <label for="selectedService" class="block text-sm font-medium text-gray-700">Services</label>
                    <select [(ngModel)]="selectedService" (change)="onServiceChange($event)" name="selectedService" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                    <option value="" disabled selected>Select Service</option>
                        @for (service of servicesOptions; track $index) {
                            <option [ngValue]="{type_service: selectedDayIndex.type ,service_id: service._id,service_type: selectCategoria, name_service: service.description || service.name|| service.name_guide || service.operador || service.company || service.nombre}">{{service.description || service.name || service.name_guide || service.operador || service.company || service.nombre}} </option>
                        }
                    </select>
                </div>
                @if (selectCategoria==='operator') {
                 <div>
                    <label for="selectedSubService" class="block text-sm font-medium text-gray-700">Services</label>
                    <select [(ngModel)]="selectedSubService" (change)="onSubServiceChange($event)" name="selectedSubService" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                    <option value="" disabled selected>Select Service</option>
                        <!-- @for (service of subservicesOptions; track $index) {
                            <option [ngValue]="{type_service: typeoptions,id:service._id,name:service.descripcion}">{{service.descripcion || service.serviceName}} </option>
                        } -->
                        @for (service of subservicesOptions; track $index) {
                            <option [ngValue]="{operator_service_id:service._id,name_service:service.descripcion}">{{service.descripcion || service.serviceName}} </option>
                        }
                    </select>
                </div>
                }
                <div class="col-start-4 flex justify-end">
                    <button (click)="addDays()" class="w-32 mt-3 px-4 bg-blue-500 dark:bg-green-700 p-3 rounded-lg text-white hover:bg-blue-600 dark:hover:bg-blue-800 self-start">
                      Add Day
                    </button>
                  </div>
            </div>
            @for (day of masterQuoter.day; track  $index; let i = $index) {

            <div>
                <h1>Dia {{$index+1}}</h1>
                <div class="mt-4 flex flex-wrap border border-gray-300">

                    <label>
                        <input type="radio" [(ngModel)]="selectedDayIndex" [value]="{ type: 'services', dayIndex: $index }" class="peer hidden" name="">
                        <div class="flex items-center justify-between px-4 py-2 cursor-pointer text-sm  group">
                            <h2 class="font-medium text-gray-700">Servicios </h2>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-9 h-9 text-blue-600 invisible group-[.peer:checked+&]:visible">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                    </label>
                    @for (tag of day.services; track $index) {
                        @if (tag.type_service=='services') {
                           <span class="tag bg-emerald-300 text-white rounded-full px-3 py-1 mr-2 mb-2 m-2 flex items-center">
                           {{ tag.name_service }}
                       <span (click)="removeTag(tag)" class="remove-tag ml-2 cursor-pointer text-lg">&times;</span>
                        </span>
                        }
                       }
                </div>
            </div>
            <div>

                <div class="mt-4 flex flex-wrap border border-gray-300">
                    <label>
                        <input type="radio" [(ngModel)]="selectedDayIndex" [value]="{ type: 'options', dayIndex: $index }" class="peer hidden" name="">
                        <div class="flex items-center justify-between px-4 py-2 cursor-pointer text-sm  group">
                            <h2 class="font-medium text-gray-700">Opcionales </h2>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-9 h-9 text-blue-600 invisible group-[.peer:checked+&]:visible">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                    </label>
                    @for (tag of day.services; track $index) {
                     @if (tag.type_service=='options') {
                        <span class="tag bg-red-400 text-white rounded-full px-3 py-1 mr-2 mb-2 m-2 flex items-center">
                        {{ tag.name_service }}
                    <span (click)="removeTag(tag)" class="remove-tag ml-2 cursor-pointer text-lg">&times;</span>
                     </span>
                     }
                    }

                </div>

            </div>
            }
            </div>
        </div>
    </div>
</div>
